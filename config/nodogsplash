# Nodogsplash configuration for LLM Gatekeeper
# Location: /etc/config/nodogsplash

config nodogsplash
    # Enable nodogsplash
    option enabled '1'

    # Network interface to manage (LAN bridge)
    option gatewayinterface 'br-lan'

    # Gateway name shown to clients
    option gatewayname 'LLM Gatekeeper'

    # Gateway address (router LAN IP)
    option gatewayaddress '192.168.8.1'

    # Authentication settings
    # Session timeout in seconds - 0 means unlimited once authenticated
    option sessiontimeout '0'

    # Idle timeout - disconnect after 2 hours of inactivity
    option authidletimeout '7200'

    # Pre-authentication timeout (seconds to complete auth)
    option preauthidletimeout '600'

    # Traffic control (optional - set to 0 for no limit)
    option uploadrate '0'
    option downloadrate '0'

    # Maximum clients
    option maxclients '250'

    # Debug level (0=silent, 1=info, 2=debug, 3=verbose)
    option debuglevel '1'

    # Use BinAuth for authentication
    option binauth '/root/binauth.sh'

# Authenticated users - allow internet access
config authenticated_users
    list users_to_router 'allow all'

# Preauthenticated users - allow DNS and gatekeeper API before auth
config preauthenticated_users
    list preauthenticated_users 'allow tcp port 53'
    list preauthenticated_users 'allow udp port 53'
    list preauthenticated_users 'allow tcp port 2051'
